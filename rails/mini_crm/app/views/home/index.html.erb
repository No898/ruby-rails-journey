<% content_for :title, "Welcome to Mini CRM" %>

<div class="container mx-auto mt-10 px-4">
  <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
    <%# Welcome Section %>
    <div class="bg-white dark:bg-gray-900 rounded-lg shadow p-6 space-y-6">
      <h1 class="text-4xl font-bold text-gray-900 dark:text-white">Welcome to Mini CRM</h1>

      <p class="text-gray-700 dark:text-gray-300 text-lg">
        Mini CRM is a simple contact management tool that allows you to:
      </p>

      <ul class="list-disc list-inside space-y-1 text-gray-700 dark:text-gray-300">
        <li>Manage contacts with name, email, phone, company and birthday</li>
        <li>Search contacts by name, email or company</li>
        <li>Add and manage notes for each contact</li>
        <li>Track contact history with automatic last contact date updates</li>
        <li>Calculate contact age based on birthday</li>
        <li>Get contact initials for avatar display</li>
        <li>Ask AI assistant about your CRM data</li>
        <li>Sign in and out securely with Devise</li>
        <li>Enjoy full dark/light mode support</li>
      </ul>

      <div class="pt-4 space-x-4">
        <% if user_signed_in? %>
          <%= render ButtonComponent.new(text: "View Contacts", href: contacts_path) %>
          <%= render ButtonComponent.new(text: "View Notes", href: notes_path) %>
          <%= render ButtonComponent.new(text: "Edit Account", href: edit_user_registration_path, variant: :secondary) %>
        <% else %>
          <%= render ButtonComponent.new(text: "Sign Up", href: new_user_registration_path) %>
          <%= render ButtonComponent.new(text: "Log In", href: new_user_session_path, variant: :secondary) %>
        <% end %>
      </div>
    </div>

    <%# Chat Section - only for signed in users %>
    <% if user_signed_in? %>
      <div class="bg-white dark:bg-gray-900 rounded-lg shadow p-6 space-y-6">
        <h2 class="text-2xl font-bold text-gray-900 dark:text-white">Ask Mini CRM</h2>
        
        <%# Chat Messages %>
        <div class="h-[300px] overflow-y-auto">
          <%= render "chat/messages" %>
        </div>

        <%# Chat Form %>
        <%= render "chat/form" %>
      </div>
    <% else %>
      <div class="bg-white dark:bg-gray-900 rounded-lg shadow p-6 space-y-6">
        <h2 class="text-2xl font-bold text-gray-900 dark:text-white">AI Assistant</h2>
        <p class="text-gray-700 dark:text-gray-300">
          Sign in to use our AI assistant that can help you analyze your contacts and notes, 
          provide insights about your CRM data, and answer questions about your business relationships.
        </p>
     
      </div>
    <% end %>
  </div>
</div>
