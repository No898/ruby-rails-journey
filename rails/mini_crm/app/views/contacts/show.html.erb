
<%# /views/contacts/show.html.erb %>

<% content_for :title, "Showing contact" %>

<div class=" w-full">
  <% if notice.present? %>
    <%= render NoticeComponent.new(message: notice, type: :success) %>
  <% end %>

  <h1 class="font-bold text-4xl">Showing contact</h1>

  <%= render @contact %>

<div class="flex flex-wrap gap-2 mt-4">
  <%= render ButtonComponent.new(text: "Edit this contact", href: edit_contact_path(@contact), variant: :secondary) %>

  <%= render ButtonComponent.new(text: "Back to contacts", href: contacts_path, variant: :secondary) %>

</div>



  <hr class="my-6" />

<h2 class="text-xl font-bold mb-3">Notes</h2>

<% @notes.each do |note| %>
  <div class="mb-4 border-l-4 pl-3 py-2 bg-blue-50 dark:bg-gray-800 border-blue-400 dark:border-blue-600 rounded-md">
    <p class="text-gray-800 dark:text-gray-100"><%= note.content %></p>

    <p class="text-sm text-gray-500 dark:text-gray-400 mt-1">
      <%= note.created_at.strftime("%d.%m.%Y %H:%M") %>
      <% if note.user.present? %>
        &middot; by <%= note.user.email %>
      <% end %>
    </p>

    <div class="mt-2 flex gap-4">
      <%= link_to "Edit", edit_note_path(note), class: "text-blue-600 hover:underline dark:text-blue-400 text-sm" %>
      <%= button_to "Delete", note_path(note), method: :delete, data: { turbo_confirm: "Are you sure?" },
          class: "text-red-600 dark:text-red-400 text-sm bg-transparent hover:underline" %>
    </div>
  </div>
<% end %>



<h3 class="text-lg font-semibold mt-6">Add a note</h3>

<%= render "notes/form", note: @note %>

</div>